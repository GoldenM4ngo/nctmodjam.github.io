campaignTrail_temp.election_json = JSON.parse("[{\"model\": \"campaign_trail.election\", \"pk\": 12, \"fields\": {\"year\": 1952, \"summary\": \"<p>For most of the Dewey presidency, America has enjoyed strong economic growth at home as the Great Depression becomes a distant memory. However, with inflation rising and tensions once again escalating between the United States and Japan, the 1952 election marks a crossroads for the country. Vice President Earl Warren must convince the public to vote for four more years of Republican leadership, while Senator Claude Pepper must unite a deeply divided Democratic Party</p>\", \"image_url\": \"https://i.imgur.com/OMJCw3p.jpg\", \"winning_electoral_vote_number\": 266, \"advisor_url\": \"https://i.imgur.com/PGXKmXB.jpg\", \"recommended_reading\": \"<a href=https://docs.google.com/document/d/1GosgKkQN7C2nVvLM_9-yf9JqjxVvoxeHoZd_0hrdWzQ/edit?usp=sharing>Mod Lore <br> <a href=https://www.youtube.com/watch?v=0YEsJpKsbBU>'Blue Tango' by Leroy Anderson</a> <br> <a href=https://www.youtube.com/watch?v=OeIce5NsWKk>'Wheel of Fortune' by Kay Starr</a> <br> <a href=https://www.youtube.com/watch?v=Iob-_shdLQ0>'Cry' by Johnnie Ray and The Four Lads</a> <br> <a href=https://www.youtube.com/watch?v=zQfF84ackMM>'You Belong to Me' by Jo Stafford</a> <br> <a href=https://www.youtube.com/watch?v=8WsuLH4sulA>'Auf Wiederseh'n, Sweetheart' by Vera Lynn</a> </a>\", \"has_visits\": 1, \"no_electoral_majority_image\": \"/static/images/1960-no-majority-photo.jpg\"}}]");
campaignTrail_temp.candidate_json = JSON.parse("[{\"model\": \"campaign_trail.candidate\", \"pk\": 116, \"fields\": {\"first_name\": \"Claude\", \"last_name\": \"Pepper\", \"election\": 12, \"party\": \"Democrat\", \"state\": \"Florida\", \"priority\": 1, \"description\": \"<p>Since entering the Senate in 1936, Claude Pepper has been a strong liberal voice in Washington, fiercely defending Roosevelt's New Deal and organized labor and becoming a key ally of Presidents Roosevelt and Farley. After two straight elections in which Democrats saw a key wing of their party split over differences on civil rights and economic issues, the party hopes Pepper can unite the North and South. Can he hold his fragile coalition of liberals and Dixiecrats together, or will he lose one or even both?</p>\", \"color_hex\": \"#0000FF\", \"secondary_color_hex\": \"#90C0FF\", \"is_active\": 1, \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/f/f7/Claude_Denson_Pepper.jpg\", \"electoral_victory_message\": \"<h3>Congratulations! You have completed the 1952 Pepper vs Warren demo!</h3><p>If you enjoyed it, please vote for it in the mod jam, and if it does well I might make it into a full mod!</p>\", \"electoral_loss_message\": \"<h3>Congratulations! You have completed the 1952 Pepper vs Warren demo!</h3><p>If you enjoyed it, please vote for it in the mod jam, and if it does well I might make it into a full mod!</p>\", \"no_electoral_majority_message\": \"<h3>Congratulations! You have completed the 1952 Pepper vs Warren demo!</h3><p>If you enjoyed it, please vote for it in the mod jam, and if it does well I might make it into a full mod!</p>\", \"description_as_running_mate\": \"'\", \"candidate_score\": 1.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 117, \"fields\": {\"first_name\": \"Earl\", \"last_name\": \"Warren\", \"election\": 12, \"party\": \"Republican\", \"state\": \"California\", \"priority\": 2, \"description\": \"<p>Earl Warren has served as Vice President under President Dewey for the past eight years. He is broadly popular with both the liberal and conservative wings of the party, but must contend with a public skeptical of the Dewey administration thanks to the current state of the economy and tensions once again rising abroad as Japan once again looks to the Philippines and Southeast Asia. He must remind the public of the economic prosperity and peace that has marked most of Dewey's presidency while offering his own solutions to the current crisis. Can he be the steady hands America needs during these times?</p>\", \"color_hex\": \"#FF0000\", \"secondary_color_hex\": \"#FFA0A0\", \"is_active\": 1, \"image_url\": \"https://www.newcampaigntrail.com/static/images/earl-warren-1948.jpg\", \"electoral_victory_message\": \"<h3>Congratulations! You have completed the 1952 Pepper vs Warren demo!</h3><p>If you enjoyed it, please vote for it in the mod jam, and if it does well I might make it into a full mod.</p>\", \"electoral_loss_message\": \"<h3>Congratulations! You have completed the 1952 Pepper vs Warren demo!</h3><p>If you enjoyed it, please vote for it in the mod jam, and if it does well I might make it into a full mod!</p>\", \"no_electoral_majority_message\": \"<h3>Congratulations! You have completed the 1952 Pepper vs Warren demo!</h3><p>If you enjoyed it, please vote for it in the mod jam, and if it does well I might make it into a full mod!</p>\", \"description_as_running_mate\": \"'\", \"candidate_score\": 1.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 118, \"fields\": {\"first_name\": \"Fielding\", \"last_name\": \"Wright\", \"election\": 12, \"party\": \"Dixiecrat\", \"state\": \"Mississippi\", \"priority\": 3, \"description\": \"'\", \"color_hex\": \"#FFFF00\", \"secondary_color_hex\": \"#FFFFC0\", \"is_active\": 0, \"image_url\": \"'\", \"electoral_victory_message\": \"'\", \"electoral_loss_message\": \"'\", \"no_electoral_majority_message\": \"'\", \"description_as_running_mate\": \"'\", \"candidate_score\": 1.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 119, \"fields\": {\"first_name\": \"Other\", \"last_name\": \"Candidates\", \"election\": 12, \"party\": \"Other\", \"state\": \"United States of America\", \"priority\": 4, \"description\": \"'\", \"color_hex\": \"#00C100\", \"secondary_color_hex\": \"#A1FFA1\", \"is_active\": 0, \"image_url\": \"'\", \"electoral_victory_message\": \"'\", \"electoral_loss_message\": \"'\", \"no_electoral_majority_message\": \"'\", \"description_as_running_mate\": \"'\", \"candidate_score\": 1.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 120, \"fields\": {\"first_name\": \"Lyndon\", \"last_name\": \"Johnson\", \"election\": 12, \"party\": \"Democrat\", \"state\": \"Texas\", \"priority\": 5, \"description\": \"'\", \"color_hex\": \"#0000FF\", \"secondary_color_hex\": \"#90C0FF\", \"is_active\": 0, \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/a/a5/Senator_Lyndon_Johnson.jpg\", \"electoral_victory_message\": \"'\", \"electoral_loss_message\": \"'\", \"no_electoral_majority_message\": \"'\", \"description_as_running_mate\": \"<p>Lyndon Johnson has served as a United States Senator since 1941 after a narrow upset victory over Governor Pappy O'Daniel. A committed supporter of the New Deal and a relative moderate on civil rights, he has friends and allies across the party, and is on amicable terms with Pepper. His selection would double down on Pepper’s record as a liberal-minded southerner, but may alienate civil rights supporters suspicious of having an all-southern ticket leading the party. Furthermore, Johnson is highly ambitious, and will need assurances that the vice presidency will not simply be a sinecure for him.</p>\", \"candidate_score\": 0.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 121, \"fields\": {\"first_name\": \"Charles\", \"last_name\": \"Halleck\", \"election\": 12, \"party\": \"Republican\", \"state\": \"Indiana\", \"priority\": 6, \"description\": \"'\", \"color_hex\": \"#FF0000\", \"secondary_color_hex\": \"#FFA0A0\", \"is_active\": 0, \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/a/aa/Rep._Charles_A._Halleck_of_Ind.%2C_member_of_the_Committee_investigating_the_Nat%27l_Labor_Relations_Board%2C_Sept._1939_LCCN2016876179_%28cropped%29.jpg\", \"electoral_victory_message\": \"'\", \"electoral_loss_message\": \"'\", \"no_electoral_majority_message\": \"'\", \"description_as_running_mate\": \"<p>Charles Halleck has served as a United States Representative since 1935 and as House Minority Whip since 1947. A devoted conservative who has been a fiery critic of the New Deal and Pepper’s proposals to expand them and is a supporter of the status quo on foreign policy, his selection would undoubtedly energize the Bricker wing of the party. His selection would balance the ticket ideologically and geographically, but also open it up to attack at a time when many Americans are concerned about the economy and the threat of war with Japan.</p>\", \"candidate_score\": 0.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 125, \"fields\": {\"first_name\": \"Benjamin\", \"last_name\": \"Laney\", \"election\": 12, \"party\": \"Dixiecrat\", \"state\": \"Arkansas\", \"priority\": 10, \"description\": \"'\", \"color_hex\": \"#FFFF00\", \"secondary_color_hex\": \"#FFFFC0\", \"is_active\": 0, \"image_url\": \"'\", \"electoral_victory_message\": \"'\", \"electoral_loss_message\": \"'\", \"no_electoral_majority_message\": \"'\", \"description_as_running_mate\": \"'\", \"candidate_score\": 0.0}}, {\"model\": \"campaign_trail.candidate\", \"pk\": 126, \"fields\": {\"first_name\": \"Other\", \"last_name\": \"Candidates\", \"election\": 12, \"party\": \"Other\", \"state\": \"United States of America\", \"priority\": 11, \"description\": \"'\", \"color_hex\": \"#00C100\", \"secondary_color_hex\": \"#A1FFA1\", \"is_active\": 0, \"image_url\": \"'\", \"electoral_victory_message\": \"'\", \"electoral_loss_message\": \"'\", \"no_electoral_majority_message\": \"'\", \"description_as_running_mate\": \"'\", \"candidate_score\": 0.0}}]");
campaignTrail_temp.running_mate_json = JSON.parse("[{\"model\": \"campaign_trail.running_mate\", \"pk\": 76, \"fields\": {\"candidate\": 116, \"running_mate\": 120}}, {\"model\": \"campaign_trail.running_mate\", \"pk\": 81, \"fields\": {\"candidate\": 118, \"running_mate\": 125}}, {\"model\": \"campaign_trail.running_mate\", \"pk\": 82, \"fields\": {\"candidate\": 119, \"running_mate\": 126}}, {\"model\": \"campaign_trail.running_mate\", \"pk\": 77, \"fields\": {\"candidate\": 117, \"running_mate\": 121}}]");
campaignTrail_temp.opponents_default_json = JSON.parse("[{\"election\": 12, \"candidates\": [116, 118, 119, 117]}]");
campaignTrail_temp.opponents_weighted_json = JSON.parse("[{\"election\": 12, \"candidates\": [116, 117, 118, 119]}]");        
campaignTrail_temp.difficulty_level_json = JSON.parse("[{\"model\": \"campaign_trail.difficulty_level\", \"pk\": 1, \"fields\": {\"name\": \"Easy\", \"multiplier\": 1.1}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 3, \"fields\": {\"name\": \"Normal\", \"multiplier\": 0.97}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 4, \"fields\": {\"name\": \"Hard\", \"multiplier\": 0.95}}, {\"model\": \"campaign_trail.difficulty_level\", \"pk\": 5, \"fields\": {\"name\": \"Impossible\", \"multiplier\": 0.9}}]");
campaignTrail_temp.global_parameter_json = JSON.parse("[{\"model\": \"campaign_trail.global_parameter\", \"pk\": 1, \"fields\": {\"vote_variable\": 1.125, \"max_swing\": 0.12, \"start_point\": 0.94, \"candidate_issue_weight\": 10.0, \"running_mate_issue_weight\": 3.0, \"issue_stance_1_max\": -0.71, \"issue_stance_2_max\": -0.3, \"issue_stance_3_max\": -0.125, \"issue_stance_4_max\": 0.125, \"issue_stance_5_max\": 0.3, \"issue_stance_6_max\": 0.71, \"global_variance\": 0.01, \"state_variance\": 0.005, \"question_count\": 5, \"default_map_color_hex\": \"#C9C9C9\", \"no_state_map_color_hex\": \"#999999\"}}]");
campaignTrail_temp.temp_election_list = [{"id": 12, "year": 1952, "is_premium": 0, "display_year": "1952PepperVsWarren"}];
RecReading=true;  
e=campaignTrail_temp
  $("#game_start").click((event) => {
    event.preventDefault();
    $("#election_id_button").click((event) => {
        event.preventDefault();
               musicMode()
})
  })
musicMode = () => {
    $("#music_player")[0].children[0].style.display = "none"
    $("#music_player")[0].children[1].style.display = "none"
    document.getElementById("modLoadReveal").style.display = "none"
    document.getElementById("modloaddiv").style.display = "none"
    musicBox = document.getElementById("music_player")
    musicBox.style.display = ""  
    var trackSel;
    e = campaignTrail_temp
    e.selectedSoundtrack = 0
    toTime = (seconds) => {
        var date = new Date(null);
        date.setSeconds(seconds);
        return date.toISOString().substr(11, 8);
    }
    generateTime = () => {
        // Get the audio element
        var audio = document.getElementById("campaigntrailmusic");
        timeTracker = document.createElement("div");
        timeTracker.style = `
  text-align:left;
  border-style:solid;
  border-width:3px;
  height:150px;
  width:200px;
  background-color:#999999;
  float:right;
  padding: 10px;
  `
        $("#trackSelParent")[0].prepend(timeTracker);
        $("#trackSelParent")[0].prepend(document.createElement("br"));
        var positionDisplay = document.createElement("gg");
        positionDisplay.id = "position-display";
        var timeSlider = document.createElement("input");
        timeSlider.type = "range";
        timeSlider.min = 0;
        timeSlider.max = 1;
        timeSlider.step = 0.001;
        timeSlider.value = 0;
        timeSlider.style.width = "200px";
        timeSlider.id = "time-slider";  
        var pausePlay = document.createElement("button");
        pausePlay.id = "position-display";
        pausePlay.innerHTML = "<b>Pause</b>"
        pausePlay.style.width = "100%";
        pausePlay.addEventListener("click", event => {
            event.preventDefault();
            updatePositionDisplay();
            let audio = document.getElementById("campaigntrailmusic");
            if (audio.paused) {
                audio.play();
                event.target.innerHTML = "<b>Pause</b>";
                return;
            }
            audio.pause();
            event.target.innerHTML = "<b>Play</b>";
            return;
        })  
        var volumeLabel = document.createElement("gg");
        volumeLabel.id = "volume-label";
        volumeLabel.innerHTML = "<br><b>Volume: </b>"  
        var volumeSlider = document.createElement("input");
        volumeSlider.type = "range";
        volumeSlider.min = 0;
        volumeSlider.max = 1;
        volumeSlider.step = 0.001;
        volumeSlider.value = 0;
        volumeSlider.style.width = "200px";
        volumeSlider.id = "volume-slider";  
        volumeSlider.value = audio.volume;
        timeTracker.appendChild(pausePlay);
        timeTracker.appendChild(document.createElement("br"));
        timeTracker.appendChild(document.createElement("br"));
        timeTracker.appendChild(positionDisplay);
        timeTracker.appendChild(timeSlider);
        timeTracker.appendChild(volumeLabel);
        timeTracker.appendChild(volumeSlider);  
        updatePositionDisplay();
        function updatePositionDisplay() {
            positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
            timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
        }
        function changeTime() {
            positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
            audio.currentTime = timeSlider.value * audio.duration;
        }
        updateVolume = event => {
            audio.volume = event.target.value;
        }
        setInterval(updatePositionDisplay, 1000);
        timeSlider.addEventListener("input", changeTime);
        volumeSlider.addEventListener("input", updateVolume)
    }
    function newMusicPlayer() {
        trackSel = document.createElement("div");
        trackSel.id = "trackSelParent"
        let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
        z += `<b><select id='selectSoundtrack'><option value='` + soundtracks[e.selectedSoundtrack].name + `'>` + soundtracks[e.selectedSoundtrack].name + "</option>"
        for (i in soundtracks) {
            if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
                z += `<option value='` + soundtracks[i].name + `'>` + soundtracks[i].name + `</option>`
            }
        }
        z += `</select></b><br><br>`
            // <label><input type="radio" name="option" value="option1">Option 1</label><br>
        for (i in soundtracks[e.selectedSoundtrack].tracklist) {
            let a = soundtracks[e.selectedSoundtrack].tracklist[i]
            let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="` + i + `">` + a.name + `</label><br>`
            z += b
        }
        z += "</div><br><br>"
        trackSel.innerHTML = z
        musicBox.appendChild(trackSel);
        Array.from(document.getElementById("trackSel").children).filter(f => {
            return f.tagName == "LABEL"
        }).map(f => f.children[0])[0].checked = true
        soundtrackSelector = document.getElementById("selectSoundtrack")
        soundtrackSelector.onchange = function() {
            for (i in soundtracks) {
                if (soundtracks[i].name == soundtrackSelector.value) {
                    e.selectedSoundtrack = i
                    break
                }
            }
            document.getElementById("trackSelParent").remove()
            newMusicPlayer()
        }
        var matches = document.querySelectorAll('.trackSelector');
        for (match in matches) {
            matches[match].onchange = function() {
                audio = $("#campaigntrailmusic")[0];
                audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
                audio.currentTime = 0
            }
        }
        musicBox.children[2].loop = false
        musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url
        musicBox.children[2].onended = function() {
            console.log("next track")
            let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
            let newSel = clamp(selected + 1, soundtracks[e.selectedSoundtrack].tracklist.length - 1, 0)
            let buttons = Array.from(document.getElementById("trackSel").children).filter(f => {
                    return f.tagName == "LABEL"
                }).map(f => f.children[0])
                //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
            buttons[newSel].click()
        }
        for (w = 0; w < 7; w++) {
          document.getElementById("trackSelParent").appendChild(document.createElement("br"))
        }
        generateTime();
    }
    clamp = function(a, max, min, overflow = true) {
        if (overflow) {
            return a > max ? min : a < min ? max : a;
        }
        return a > max ? max : a < min ? min : a;
    }
    var soundtracks = {
        0: {
          name: "1952 Billboard Top 5",
          tracklist: [
            {
              "name": " “Blue Tango” by Leroy Anderson",
              "url": "https://cdn.discordapp.com/attachments/1120520731931988060/1120520851176042567/1952_HITS_ARCHIVE__Blue_Tango_-_Leroy_Anderson_his_original_1_version.mp3"
            },
            {
              "name": " “Wheel of Fortune” by Kay Starr",
              "url": "https://cdn.discordapp.com/attachments/1120520731931988060/1120521671170863145/Kay_Starr_-_Wheel_Of_Fortune_1952.mp3"
            },
            {
              "name": " “Cry” by Johnnie Ray and The Four Lads",
              "url": "https://cdn.discordapp.com/attachments/1120520731931988060/1120522412002377738/Cry_Johnnie_Ray__The_Four_Lads_1951.mp3"
            },
            {
              "name": " “You Belong to Me” by Jo Stafford",
              "url": "https://cdn.discordapp.com/attachments/1120520731931988060/1120524337057910874/Jo_Stafford_-_You_Belong_To_Me.mp3"
            },
            {
              "name": " “Auf Wiederseh'n, Sweetheart” by Vera Lynn",
              "url": "https://cdn.discordapp.com/attachments/1120520731931988060/1120525285809459210/Vera_Lynn_-_Auf_Wiedersehn_Sweetheart__1952_.mp3"
            }
        ]
            }
    }
    newMusicPlayer()
  }
quotes = ["“Ageism is as odious as racism and sexism.” - Claude Pepper", "“The mistake a lot of politicians make is in forgetting they've been appointed and thinking they've been anointed.” - Claude Pepper", "“Life is like riding a bicycle: you don't fall off unless you stop pedaling.” - Claude Pepper", "“A stockbroker urged me to buy a stock that would triple its value every year. I told him, ‘At my age, I don't even buy green bananas.’” - Claude Pepper", "“One has the right to be wrong in a democracy.” - Claude Pepper", "“When the rights of any individual or group are chipped away, the freedom of all erodes.” - Earl Warren", "“Many people consider the things government does for them to be social progress but they regard the things government does for others as socialism.” - Earl Warren", "“Perhaps the most tragic paradox of our time is to be found in the failure of nation-states to recognize the imperatives of internationalism.” - Earl Warren", "“The censor's sword pierces deeply into the heart of free expression.” - Earl Warren", "“I always turn to the sports section first. The sports section records people's accomplishments; the front page nothing but man's failures.” - Earl Warren"]
customquote = quotes[Math.floor((Math.random() * quotes.length))]
corrr=`\n<h2>NEW CAMPAIGN TRAIL</h2><font id='wittyquote' size='4' color='white'><em>`+customquote+`</em></font>`
document.body.background = "https://i.imgur.com/gK8kHD7.jpg"
document.getElementById("header").src = "https://i.imgur.com/m8lKZr4.jpg"
HistHexcolour=["#0000FF","#FF0000","#00C100","#FFFF00"];
    HistName=[" Claude Pepper"," Earl Warren"," Other Candidates"," Unpledged Electors"];
    HistEV=[266,265,0,0];
    HistPV=["30,628,963","30,505,459","370,512","247,008"];
    HistPVP=["49.6%","49.4%","0.6%","0.4%"];
e.credits = "SkyBlue#3951, with thanks to TedThing(banner and background), DecstarG and RouteVenus(music player from 2000N and 1972d), FlongydOlson(quote generator from 1971 South Korea), DecstarG(Code 1 maker), Jet(Code 2 maker), and Augenis(piece of lore from 1930 Weimar)";